# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - –ë–æ—Ç + –ö–ª–∏–µ–Ω—Ç

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **–¥–≤—É—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ:

1. **Telegram Bot (–°–µ—Ä–≤–µ—Ä)** - –°–∏–º—É–ª–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–∑–æ–∫
2. **Auto Booking Client (–ö–ª–∏–µ–Ω—Ç)** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—Ä–æ–Ω–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     ‚îÇ         ‚îÇ                     ‚îÇ
‚îÇ   TELEGRAM BOT      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  BOOKING CLIENT     ‚îÇ
‚îÇ   (bot.py)          ‚îÇ         ‚îÇ  (main.py)          ‚îÇ
‚îÇ                     ‚îÇ         ‚îÇ                     ‚îÇ
‚îÇ  - Bot API          ‚îÇ         ‚îÇ  - Client API       ‚îÇ
‚îÇ  - SQLite DB        ‚îÇ         ‚îÇ  - Telethon         ‚îÇ
‚îÇ  - /start, /admin   ‚îÇ         ‚îÇ  - Auto booking     ‚îÇ
‚îÇ  - SMS notifications‚îÇ         ‚îÇ  - < 150ms speed    ‚îÇ
‚îÇ                     ‚îÇ         ‚îÇ                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì                               ‚Üì
    [Database]                      [Sessions]
     bot.db                         sessions/
```

## üöÄ –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–æ–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd aprel

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Python 3.10+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
python3 --version
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞ (—Å–µ—Ä–≤–µ—Ä)

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –±–æ—Ç–∞
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–æ—Ç–∞
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç
cp .env.example .env
nano .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç—å `.env`:
```env
BOT_TOKEN=your_bot_token_from_BotFather
ADMIN_IDS=your_telegram_user_id
BOOKING_TIME=11:30
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞

```bash
# –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ)
deactivate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –∫–ª–∏–µ–Ω—Ç–∞
./setup_client.sh

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∏–µ–Ω—Ç
nano config.yaml
```

–ó–∞–ø–æ–ª–Ω–∏—Ç—å `config.yaml`:
```yaml
telegram:
  api_id: 12345678              # –û—Ç my.telegram.org
  api_hash: "your_api_hash"
  phone: "+79991234567"

bot:
  username: "your_bot_username"  # –ë–ï–ó @

targets:
  - cities: ["–ß–µ–ª—è–±–∏–Ω—Å–∫"]
    priority: 1

performance:
  polling_interval_ms: 30
```

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Ä–º–∏–Ω–∞–ª 1 - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:**
```bash
cd aprel
source venv/bin/activate  # –û–∫—Ä—É–∂–µ–Ω–∏–µ –±–æ—Ç–∞
python bot.py
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2 - –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞:**
```bash
cd aprel
source venv/bin/activate  # –¢–æ –∂–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–µ
python main.py --mode immediate
```

**Telegram:**
1. –ù–∞–π—Ç–∏ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **"üß™ –¢–µ—Å—Ç"**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–ö–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–±–Ω–∞—Ä—É–∂–∏—Ç SMS –æ—Ç –±–æ—Ç–∞
- –û—Ç–ø—Ä–∞–≤–∏—Ç `/start`
- –í—ã–±–µ—Ä–µ—Ç –ø–µ—Ä–µ–≤–æ–∑–∫—É
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (< 150ms)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º—è –≤ –±–æ—Ç–µ** (`.env`):
```env
BOOKING_TIME=15:30  # –ù–∞–ø—Ä–∏–º–µ—Ä, 15:30
```

**2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º—è –≤ –∫–ª–∏–µ–Ω—Ç–µ** (`config.yaml`):
```yaml
booking:
  target_time: "15:30:00"  # –¢–æ –∂–µ –≤—Ä–µ–º—è
```

**3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç:**
```bash
python bot.py
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç SMS –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ 15:30.

**4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç –≤ —Ä–µ–∂–∏–º–µ scheduled:**
```bash
python main.py --mode scheduled
```

–ö–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç:
- –ñ–¥–∞—Ç—å –¥–æ 15:29:00 (–∑–∞ 60 —Å–µ–∫)
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—Å—è
- –í 15:29:50 –Ω–∞—á–Ω–µ—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ SMS –≤—ã–ø–æ–ª–Ω–∏—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ—Ç:

1. **–ó–∞–ø—É—Å–∫ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   ```
   bot.py ‚Üí –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram Bot API
          ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
          ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–∑–æ–∫
          ‚Üí –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
   ```

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - `/start` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–≤–æ–∑–æ–∫
   - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
   - "üß™ –¢–µ—Å—Ç" - —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

3. **–í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:**
   ```
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "üß™ –¢–µ—Å—Ç"
   ‚Üí –ë–æ—Ç —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏
   ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SMS-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   ‚Üí –ñ–¥–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ‚Üí –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏
   ```

4. **–í –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ:**
   ```
   –í 11:30:00 (–∏–ª–∏ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è)
   ‚Üí –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
   ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SMS –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
   ‚Üí –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ‚Üí –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
   ```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç:

1. **–†–µ–∂–∏–º immediate (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
   ```
   main.py --mode immediate
   ‚Üí –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram
   ‚Üí –ù–∞—á–∞–ª–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   ‚Üí –û–∂–∏–¥–∞–Ω–∏–µ SMS –æ—Ç –±–æ—Ç–∞
   ‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ‚Üí –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   ```

2. **–†–µ–∂–∏–º scheduled (–ø—Ä–æ–¥–∞–∫—à–Ω)**
   ```
   main.py --mode scheduled
   ‚Üí –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram
   ‚Üí –û–∂–∏–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
   ‚Üí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–∑–∞ 60 —Å–µ–∫)
   ‚Üí –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∑–∞ 10 —Å–µ–∫)
   ‚Üí –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ SMS
   ‚Üí –£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
   ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ```

## üìä –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:

```
–í—Ä–µ–º—è  | –ë–æ—Ç                      | –ö–ª–∏–µ–Ω—Ç
-------|--------------------------|---------------------------
00:00  | –û–∂–∏–¥–∞–Ω–∏–µ                 | python main.py --mode immediate
00:05  | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: üß™ –¢–µ—Å—Ç   | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SMS...
00:06  | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤          |
00:07  | –û—Ç–ø—Ä–∞–≤–∫–∞ SMS             |
00:08  |                          | ‚úì SMS –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ (47ms)
00:09  |                          | ‚Üí /start –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
00:10  | –û–±—Ä–∞–±–æ—Ç–∫–∞ /start         |
00:11  | –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–Ω—é            |
00:12  |                          | ‚úì –ú–µ–Ω—é –ø–æ–ª—É—á–µ–Ω–æ (38ms)
00:13  |                          | ‚Üí –ö–ª–∏–∫ –Ω–∞ –ø–µ—Ä–µ–≤–æ–∑–∫—É
00:14  | –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞         |
00:15  | –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è   |
00:16  |                          | ‚úì –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (32ms)
00:17  |                          | ‚Üí –ö–ª–∏–∫ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
00:18  | –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ             |
00:19  | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞      |
00:20  |                          | ‚úì –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω
00:21  |                          | üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 117ms
```

### –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º:

```
–í—Ä–µ–º—è  | –ë–æ—Ç                      | –ö–ª–∏–µ–Ω—Ç
-------|--------------------------|---------------------------
11:29:00| –û–∂–∏–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏        | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞—á–∞—Ç–∞
11:29:10| –û–∂–∏–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏        | –û—Ç–ø—Ä–∞–≤–∫–∞ /start (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
11:29:50| –û–∂–∏–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏        | –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (30ms)
11:30:00| –û—Ç–∫—Ä—ã—Ç–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è   | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥...
11:30:00| –û—Ç–ø—Ä–∞–≤–∫–∞ SMS –≤—Å–µ–º       | 
11:30:00|                          | ‚úì SMS –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ!
11:30:00|                          | ‚Üí –£–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
11:30:00| –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤      |
11:30:01| –ü–µ—Ä–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úì   | ‚úì –£—Å–ø–µ—Ö! (< 150ms)
```

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π A: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

**–¶–µ–ª—å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫–ª–∏–µ–Ω—Ç–∞

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç –≤ —Ä–µ–∂–∏–º–µ immediate
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "üß™ –¢–µ—Å—Ç" –≤ –±–æ—Ç–µ
4. –ù–∞–±–ª—é–¥–∞—Ç—å –ª–æ–≥–∏ –≤ –æ–±–æ–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö
5. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π B: –ü—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å:** –†–µ–∞–ª—å–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–µ—Ä–≤–∏—Å (systemd)
2. –ö–ª–∏–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞ 5 –º–∏–Ω—É—Ç –¥–æ –≤—Ä–µ–º–µ–Ω–∏
3. –ö–ª–∏–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π C: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–¶–µ–ª—å:** –ò–∑–º–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å test_client.py –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤
4. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –ª–æ–≥–∞—Ö
5. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
- SMS detection time
- Stage 1 time (SMS ‚Üí /start)
- Stage 2 time (/start ‚Üí select)
- Stage 3 time (select ‚Üí confirm)
- Total time

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏:

**–ö–ª–∏–µ–Ω—Ç (config.yaml):**
```yaml
performance:
  polling_interval_ms: 30       # –ú–∏–Ω–∏–º—É–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
  max_retries: 1                # –ë—ã—Å—Ç—Ä—ã–π fail-fast
  connection_timeout: 5         # –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–∞–π–º–∞—É—Ç
```

### –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:

**–ö–ª–∏–µ–Ω—Ç (config.yaml):**
```yaml
performance:
  polling_interval_ms: 50       # –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API
  max_retries: 5                # –ë–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
  connection_timeout: 15        # –î–ª–∏–Ω–Ω—ã–π —Ç–∞–π–º–∞—É—Ç
```

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**–ë–æ—Ç (.env):**
```env
BOOKING_TIME=11:30
TEST_MODE_ENABLED=true
```

**–ö–ª–∏–µ–Ω—Ç (config.yaml):**
```yaml
notifications:
  telegram_notify: false        # –ù–µ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
  sound_alert: false            # –ù–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∑–≤—É–∫–∏
```

## üìù –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞:

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 logs/booking_client.log

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/booking_client.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep ERROR logs/booking_client.log
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞:

```bash
# –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏
tail -f logs/booking_client.log

# JSON –ª–æ–≥–∏ (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)
cat logs/booking_client_json.log | jq '.details'

# –§–∏–ª—å—Ç—Ä –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º
cat logs/booking_client_json.log | jq 'select(.action=="booking_attempt")'
```

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞:

**–¢–µ—Ä–º–∏–Ω–∞–ª 1:**
```bash
python bot.py 2>&1 | tee bot_debug.log
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2:**
```bash
python main.py --mode immediate 2>&1 | tee client_debug.log
```

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–ª–∏–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç SMS

**–ü—Ä–∏—á–∏–Ω–∞:** Username –±–æ—Ç–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–ª–∏ –¥–∏–∞–ª–æ–≥ –Ω–µ –Ω–∞—á–∞—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `bot.username` –≤ config.yaml (–ë–ï–ó @)
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` –±–æ—Ç—É –≤—Ä—É—á–Ω—É—é —Ö–æ—Ç—è –±—ã —Ä–∞–∑
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ë–æ—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `python bot.py` –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å BOT_TOKEN –≤ .env
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (> 200ms)

**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –≤—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–º–µ–Ω—å—à–∏—Ç—å polling_interval_ms –¥–æ 30
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ping –¥–æ Telegram —Å–µ—Ä–≤–µ—Ä–æ–≤
3. –ó–∞–∫—Ä—ã—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–æ–¥–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 4: FloodWaitError

**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å polling_interval_ms
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
3. –ù–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –±–æ—Ç–∞:

```bash
# –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—É
/admin_stats

# –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Ç–µ—Å—Ç–æ–≤
/admin_test_stats
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞:

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

```
SMS ‚Üí /start:     47ms
/start ‚Üí –≤—ã–±–æ—Ä:   38ms
–í—ã–±–æ—Ä ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–¥: 32ms
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–û–±—â–µ–µ –≤—Ä–µ–º—è:     117ms
```

### –ê–Ω–∞–ª–∏–∑ JSON –ª–æ–≥–æ–≤:

```bash
# –°—Ä–µ–¥–µ–µ –≤—Ä–µ–º—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
cat logs/booking_client_json.log | \
  jq -r 'select(.action=="booking_attempt") | .details.total_time_ms' | \
  awk '{sum+=$1; n++} END {print "Average:", sum/n, "ms"}'

# –°–∞–º–æ–µ –±—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
cat logs/booking_client_json.log | \
  jq -r 'select(.action=="booking_attempt") | .details.total_time_ms' | \
  sort -n | head -1
```

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. –ó–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –∏ –∫–ª–∏–µ–Ω—Ç–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º immediate –¥–ª—è —Ç–µ—Å—Ç–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
4. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:

1. –ó–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –∫–∞–∫ systemd service
2. –ó–∞–ø—É—Å–∫–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞ 5 –º–∏–Ω—É—Ç –¥–æ –≤—Ä–µ–º–µ–Ω–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. –î–µ–ª–∞—Ç—å backup —Å–µ—Å—Å–∏–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ
5. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏

### –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
2. –ò–∑–º–µ—Ä—è—Ç—å ping –¥–æ Telegram
3. –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å polling_interval_ms
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSD –¥–ª—è —Å–µ—Å—Å–∏–π

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ:

- **–ë–æ—Ç** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é —á–∞—Å—Ç—å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- **–ö–ª–∏–µ–Ω—Ç** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é

–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –í—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ < 150ms
- ‚úÖ –í—ã—Å–æ–∫—É—é –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–æ—Ç–∞
- `CLIENT_README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- `CLIENT_ARCHITECTURE.md` - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞
- `QUICKSTART_CLIENT.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `INTEGRATION_GUIDE.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

**–£–¥–∞—á–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**
